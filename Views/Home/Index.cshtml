@model IEnumerable<Source.Models.THIETBI>

@{
    ViewBag.Title = "Index";
}

<main>
    <div class="container link">
        <p>Trang chủ</p>
        <hr />
    </div>
    <section class="container" id="ds-tb">
        <h4 class="sub-title">Danh sách thiết bị</h4>
        <div class="div-dstb">
            <div class="ds-tb">
                <table>
                    <tr>
                        <th>Mã TB</th>
                        <th>Tên TB</th>
                        <th>Nhóm TB</th>
                        <th>Loại TB</th>
                        <th>Serial</th>
                        <th>Giá tiền</th>
                        <th>THBH</th>
                        <th>Tình trạng</th>
                        <th>ĐVQL</th>
                        @*<th>Người QL</th>*@
                    </tr>

                    @foreach (var item in Model)
                    {
                        <tr class="tablinks" onclick="Edit(event, '@item.MATB')">
                            <td>
                                @Html.DisplayFor(modelItem => item.MATB)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TENTB)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.LOAI_THIETBI.NHOM_THIETBI.TEN_NHOM)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.LOAI_THIETBI.TEN_LOAI)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.SO_SERIAL)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.GIA_TIEN)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.THOI_HAN_BAO_HANH)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.TINH_TRANG)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.DON_VI.TEN_DON_VI)
                            </td>
                            @*<td>
                                    @Html.DisplayFor(modelItem => item.MANS_QL)
                                </td>*@
                        </tr>
                    }
                </table>
            </div>

            <div class="div-cauhinh d-none">
                <div class="cau-hinh">
                    <span class="close-cauhinh">
                        <i class="far fa-times-circle fa-2x"></i>
                    </span>
                    <div class="img">
                        <div class="img-container">
                            <img id="img" alt="hinh-anh-thiet-bi" />
                        </div>
                        <p class="ten-tb" id="TENTB"></p>
                    </div>
                    <h4 class="sub-title">Thông số kỹ thuật</h4>
                    <div class="div-thong-so">

                        <table>
                            <tr>
                                <td id="label1"></td>
                                <td id="thong_so1"></td>
                            </tr>
                            <tr>
                                <td id="label2"></td>
                                <td id="thong_so2"></td>
                            </tr>
                            <tr>
                                <td id="label3"></td>
                                <td id="thong_so3"></td>
                            </tr>
                            <tr>
                                <td id="label4"></td>
                                <td id="thong_so4"></td>
                            </tr>
                        </table>
                    </div>

                    <button id="chct">Cấu hình chi tiết</button>
                </div>


            </div>
            <div class="cau-hinh-chi-tiet d-none">
                <span class="close-cauhinh">
                    <i class="far fa-times-circle fa-2x"></i>
                </span>
                <div class="div-chct">
                    <div class="chct">
                        <div class="img">
                            <div class="img-container">
                                <img id="img_ct" alt="hinh-anh-thiet-bi" />
                            </div>
                            <div class="small-container-div">
                                <div class="small-img-container">
                                    <img id="img_ct1" width="50" height="50" alt="">
                                </div>
                                <div class="small-img-container">
                                    <img id="img_ct2" width="50" height="50" alt="">
                                </div>
                                <div class="small-img-container">
                                    <img id="img_ct3" width="50" height="50" alt="">
                                </div>
                                <div class="small-img-container">
                                    <img id="img_ct4" width="50" height="50" alt="">
                                </div>
                                <div class="small-img-container">
                                    <img id="img_ct5" width="50" height="50" alt="">
                                </div>
                            </div>
                            <p class="ten-tb" id="TENTB_ct"></p>
                        </div>
                        <h4 class="sub-title">Thông số kỹ thuật</h4>
                        <div class="div-thong-so">
                            <table>
                                <tr>
                                    <td id="label1_ct"></td>
                                    <td id="thong_so1_ct"></td>
                                </tr>
                                <tr>
                                    <td id="label2_ct"></td>
                                    <td id="thong_so2_ct"></td>
                                </tr>
                                <tr>
                                    <td id="label3_ct"></td>
                                    <td id="thong_so3_ct"></td>
                                </tr>
                                <tr>
                                    <td id="label4_ct"></td>
                                    <td id="thong_so4_ct"></td>
                                </tr>
                                <tr id="more1">
                                    <td id="label5_ct"></td>
                                    <td id="thong_so5_ct"></td>
                                </tr>
                                <tr id="more2">
                                    <td id="label6_ct"></td>
                                    <td id="thong_so6_ct"></td>
                                </tr>
                            </table>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
</main>

<script type="text/javascript">
    $(document).ready(function () {
        $('#img_ct2').click(function (event) {
            var src = document.createAttribute("src");
            src.value = $('#img_ct2').src;

            var img = document.getElementById("img_ct");
            img.setAttributeNode(src);
        });
    });

    function Edit(evt, row) {
        var i, tablinks;

        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        evt.currentTarget.className += " active";

        $.ajax({
            type: "POST",
            url: "/Script/get_CAU_HINH",
            data: { maTB: row },
            success: function (data) {
                $("#TENTB").html(data.TENTB);
                $("#TENTB_ct").html(data.TENTB);
                if (data.MA_NHOMTB == "PC") {
                    //Thông số kỹ thuật
                    document.getElementById("label1").innerHTML = "CPU:";
                    document.getElementById("label2").innerHTML = "RAM:";
                    document.getElementById("label3").innerHTML = "Màn hình:";
                    document.getElementById("label4").innerHTML = "Ổ cứng:";

                    $("#thong_so1").html(data.CPU);
                    $("#thong_so2").html(data.RAM);
                    $("#thong_so3").html(data.MAN_HINH);
                    $("#thong_so4").html(data.O_CUNG);

                    //Thông số kỹ thuật chi tiết
                    document.getElementById("more1").hidden = false;
                    document.getElementById("more2").hidden = false;


                    document.getElementById("label1_ct").innerHTML = "CPU:";
                    document.getElementById("label2_ct").innerHTML = "RAM:";
                    document.getElementById("label3_ct").innerHTML = "Màn hình:";
                    document.getElementById("label4_ct").innerHTML = "Ổ cứng:";
                    document.getElementById("label5_ct").innerHTML = "VGA:";
                    document.getElementById("label6_ct").innerHTML = "Hệ điều hành:";

                    $("#thong_so1_ct").html(data.CPU);
                    $("#thong_so2_ct").html(data.RAM);
                    $("#thong_so3_ct").html(data.MAN_HINH);
                    $("#thong_so4_ct").html(data.O_CUNG);
                    $("#thong_so5_ct").html(data.VGA);
                    $("#thong_so6_ct").html(data.HDH);
                }
                else if (data.MA_NHOMTB == "PR") {
                    //Thông số kỹ thuật
                    document.getElementById("label1").innerHTML = "Kích thước:";
                    document.getElementById("label2").innerHTML = "Loại mực:";
                    document.getElementById("label3").innerHTML = "Tốc độ:";
                    document.getElementById("label4").innerHTML = "Độ phân giải:";

                    $("#thong_so1").html(data.KICH_THUOC);
                    $("#thong_so2").html(data.LOAI_MUC);
                    $("#thong_so3").html(data.TOC_DO);
                    $("#thong_so4").html(data.DO_PHAN_GIAI);

                    //Thông số kỹ thuật chi tiết
                    document.getElementById("label1_ct").innerHTML = "Kích thước:";
                    document.getElementById("label2_ct").innerHTML = "Loại mực:";
                    document.getElementById("label3_ct").innerHTML = "Tốc độ:";
                    document.getElementById("label4_ct").innerHTML = "Độ phân giải:";
                    document.getElementById("more1").hidden = true;
                    document.getElementById("more2").hidden = true;


                    $("#thong_so1_ct").html(data.KICH_THUOC);
                    $("#thong_so2_ct").html(data.LOAI_MUC);
                    $("#thong_so3_ct").html(data.TOC_DO);
                    $("#thong_so4_ct").html(data.DO_PHAN_GIAI);
                }
                else {
                    //Thông số kỹ thuật
                    document.getElementById("label1").innerHTML = "";
                    document.getElementById("label2").innerHTML = "";
                    document.getElementById("label3").innerHTML = "";
                    document.getElementById("label4").innerHTML = "";

                    $("#thong_so1").html("");
                    $("#thong_so2").html("");
                    $("#thong_so3").html("");
                    $("#thong_so4").html("");

                    //Thông số kỹ thuật chi tiết
                    document.getElementById("label1_ct").innerHTML = "";
                    document.getElementById("label2_ct").innerHTML = "";
                    document.getElementById("label3_ct").innerHTML = "";
                    document.getElementById("label4_ct").innerHTML = "";
                    document.getElementById("more1").hidden = true;
                    document.getElementById("more2").hidden = true;


                    $("#thong_so1_ct").html("");
                    $("#thong_so2_ct").html("");
                    $("#thong_so3_ct").html("");
                    $("#thong_so4_ct").html("");
                }
            }
        });
        $.ajax({
            type: "GET",
            url: "/Script/get_HINH_ANH",
            data: { maTB: row },
            success: function (data) {
                //Thông số kỹ thuật
                var src = document.createAttribute("src");
                var img = document.getElementById("img");
                

                //Thông số kỹ thuật chi tiết
                var img_ct = document.getElementById("img_ct");
                var img_ct1 = document.getElementById("img_ct1");
                var img_ct2 = document.getElementById("img_ct2");
                var img_ct3 = document.getElementById("img_ct3");
                var img_ct4 = document.getElementById("img_ct4");
                var img_ct5 = document.getElementById("img_ct5");

                var src_ct = document.createAttribute("src");
                var src_ct1 = document.createAttribute("src");
                var src_ct2 = document.createAttribute("src");
                var src_ct3 = document.createAttribute("src");
                var src_ct4 = document.createAttribute("src");
                var src_ct5 = document.createAttribute("src");

                if (data != null) {
                    src.value = "Images/" + data.HINH1;
                    src_ct.value = "Images/" + data.HINH1;
                    src_ct1.value = "Images/" + data.HINH1;
                    src_ct2.value = "Images/" + data.HINH2;
                    src_ct3.value = "Images/" + data.HINH3;
                    src_ct4.value = "Images/" + data.HINH4;
                    src_ct5.value = "Images/" + data.HINH5;
                }
                else {
                    src.value = "Images/alibaba";
                    src_ct.value = "Images/alibaba";
                    src_ct1.value = "Images/alibaba";
                    src_ct2.value = "Images/alibaba";
                    src_ct3.value = "Images/alibaba";
                    src_ct4.value = "Images/alibaba";
                    src_ct5.value = "Images/alibaba";
                }

                img.setAttributeNode(src);
                img_ct.setAttributeNode(src_ct);
                img_ct1.setAttributeNode(src_ct1);
                img_ct2.setAttributeNode(src_ct2);
                img_ct3.setAttributeNode(src_ct3);
                img_ct4.setAttributeNode(src_ct4);
                img_ct5.setAttributeNode(src_ct5);

                $('#img_ct1').click(function () {
                    var src = document.createAttribute("src");
                    src.value = "Images/" + data.HINH1;

                    var img = document.getElementById("img_ct");
                    img.setAttributeNode(src);
                });

                $('#img_ct2').click(function () {
                    var src = document.createAttribute("src");
                    src.value = "Images/" + data.HINH2;

                    var img = document.getElementById("img_ct");
                    img.setAttributeNode(src);
                });

                $('#img_ct3').click(function () {
                    var src = document.createAttribute("src");
                    src.value = "Images/" + data.HINH3;

                    var img = document.getElementById("img_ct");
                    img.setAttributeNode(src);
                });

                $('#img_ct4').click(function () {
                    var src = document.createAttribute("src");
                    src.value = "Images/" + data.HINH4;

                    var img = document.getElementById("img_ct");
                    img.setAttributeNode(src);
                });

                $('#img_ct5').click(function () {
                    var src = document.createAttribute("src");
                    src.value = "Images/" + data.HINH5;

                    var img = document.getElementById("img_ct");
                    img.setAttributeNode(src);
                });
            }
        });
    };

    //function on_click(imgCHANGE) {
    //    var cHANGE = $(imgCHANGE).attr("id");

    //    var src = document.createAttribute("src");
    //    src.value = cHANGE.src;

    //    var img = document.getElementById("img_ct");
    //    img.setAttributeNode(src);
    //};
</script>

